(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{41:function(e,n,t){"use strict";t.r(n);var r=t(1),c=t(16),u=t.n(c),o=t(3),i=t(4),a=t.n(i),s=t(0),l=function(e){var n=e.onChange,t=e.value;return Object(s.jsxs)("div",{children:["filter shown results with ",Object(s.jsx)("input",{onChange:n,value:t})]})},d=function(e){var n=e.onSubmit,t=e.nameValue,r=e.nameOnChange,c=e.numberValue,u=e.numberOnChange;return Object(s.jsx)("div",{children:Object(s.jsxs)("form",{onSubmit:n,children:[Object(s.jsxs)("div",{children:["name: ",Object(s.jsx)("input",{value:t,onChange:r})]}),Object(s.jsxs)("div",{children:["number: ",Object(s.jsx)("input",{value:c,onChange:u})]}),Object(s.jsx)("div",{children:Object(s.jsx)("button",{type:"submit",children:"add"})})]})})},b=function(e){var n=e.id,t=e.name,r=e.number,c=e.handleDeleteListing;return Object(s.jsxs)("li",{children:[t," ",r,Object(s.jsx)("button",{onClick:function(){return c(n)},children:"Delete"})]})},j=function(e){var n=e.persons,t=e.handleDeleteListing;return Object(s.jsx)("div",{children:Object(s.jsx)("ul",{children:n.map((function(e){return Object(s.jsx)("div",{children:Object(s.jsx)(b,{id:e.id,name:e.name,number:e.number,handleDeleteListing:t},e.name)})}))})})},h=t(7),f="/api/persons",m=function(){return a.a.get(f).then((function(e){return e.data}))},O=function(e){return a.a.post(f,e).then((function(e){return e.data}))},g=function(e){var n="".concat(f,"/").concat(e);return a.a.delete(n).then((function(e){return e.data}))},p=function(e,n){var t=Object(h.a)(Object(h.a)({},e),{},{number:n}),r="".concat(f,"/").concat(t.id);return a.a.put(r,t).then((function(e){return e.data}))},x=function(e){var n=e.message,t=e.errorMessageType,r={bakcgroundColor:"cream",fontSize:20,padding:"10px",borderRadius:"5px",marginBottom:"15px"};return 1===t&&(r.color="green",r.border="2px green solid",r.backgroundColor="cream"),2===t&&(r.color="red",r.border="2px red solid",r.backgroundColor="lightgray"),null===n?null:Object(s.jsx)("div",{style:r,children:n})},v=function(){var e=Object(r.useState)([]),n=Object(o.a)(e,2),t=n[0],c=n[1],u=Object(r.useState)("name"),i=Object(o.a)(u,2),a=i[0],b=i[1],h=Object(r.useState)("number"),f=Object(o.a)(h,2),v=f[0],C=f[1],k=Object(r.useState)(""),S=Object(o.a)(k,2),y=S[0],w=S[1],T=Object(r.useState)(null),D=Object(o.a)(T,2),L=D[0],V=D[1],A=Object(r.useState)(0),B=Object(o.a)(A,2),E=B[0],J=B[1];Object(r.useEffect)((function(){m().then((function(e){c(e)}))}),[]);var M=""===y?t:t.filter((function(e){return e.name.includes(y)}));return Object(s.jsxs)("div",{children:[Object(s.jsx)("h2",{children:"Phonebook"}),Object(s.jsx)(x,{message:L,errorMessageType:E}),Object(s.jsx)(l,{onChange:function(e){w(e.target.value)},value:y}),Object(s.jsx)("h3",{children:"Add a new listing"}),Object(s.jsx)(d,{onSubmit:function(e){e.preventDefault();var n={name:a,number:v};if(t.some((function(e){return e.name===a}))){if(window.confirm("".concat(a," already exists in the phonebook.  Would you like to replace the number?"))){var r=t.find((function(e){return e.name===a}));p(r,n.number).then((function(e){c(t.map((function(n){return n.id!==e.id?n:e}))),b(""),C("")})).catch((function(e){J(2),V(e.response.data.error),setTimeout((function(){V(null),J(0)}),5e3)}))}else b(""),C("");return 1}O(n).then((function(e){c(t.concat(e)),b(""),C(""),J(1),V("Added ".concat(n.name)),setTimeout((function(){V(null),J(0)}),5e3)})).catch((function(e){J(2),V(e.response.data.error),setTimeout((function(){V(null),J(0)}),5e3)}))},nameValue:a,nameOnChange:function(e){b(e.target.value)},numberValue:v,numberOnChange:function(e){C(e.target.value)}}),Object(s.jsx)("h2",{children:"Numbers"}),Object(s.jsx)(j,{persons:M,handleDeleteListing:function(e){g(e).then((function(e){J(1),V("Person deleted successfully."),setTimeout((function(){V(null),J(0)}),5e3)})).catch((function(e){J(2),V("Server error - Failed to delete - the person no longer exists"),setTimeout((function(){V(null),J(0)}),5e3)})),c(t.filter((function(n){return n.id!==e})))}})]})};u.a.render(Object(s.jsx)(v,{}),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.868e74d8.chunk.js.map